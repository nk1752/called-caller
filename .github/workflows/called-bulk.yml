name: called-bulk

on:
  workflow_call:
    inputs:
      env:
        type: string
        required: true
      SN:
        type: string
        required: true
        

jobs:
  reuse-job:
    runs-on: ubuntu-latest

    steps:
      - name: print inputs
        run: |
          echo "SN: ${{ inputs.SN }}"
          echo "env: ${{ inputs.env }}"

      - name: checkout
        uses: actions/checkout@v4.1.6

      - name: read config
        run: |
          name=$(jq '.${{inputs.SN}}.name' config.json)
          echo "name: $name"

          if [[ "${{inputs.env}}" == "dev" ]]; then
            echo "dev"
            dev_env_id=$(jq '.${{inputs.SN}}.DEV' config.json)
            echo "dev_env_id: $dev_env_id"
          echo "dev_env_id: $dev_env_id"
          elif [[ "${{inputs.env}}" == "prod" ]]; then
            echo "prod"
          elif [[ "${{inputs.env}}" == "qa" ]]; then
            echo "qa"
          else
            echo "Invalid env"
            exit 1
          fi

          dev_env_id=$(jq '.${{inputs.SN}}.DEV' config.json)
          echo "dev_env_id: $dev_env_id"

          prod_env_id=$(jq '.${{inputs.SN}}.PROD' config.json)
          echo "prod_env_id: $prod_env_id"

          qa_env_id=$(jq '.${{inputs.SN}}.QA' config.json)
          echo "qa_env_id: $qa_env_id"

          
          

          
          